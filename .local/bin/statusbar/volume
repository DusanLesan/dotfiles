#!/bin/sh

setVolume() {
	wpctl "$@"
	# kill -39 $(pidof dwmblocks) # there is a service that does this now
}

case $BLOCK_BUTTON in
	1) alacritty --class "floating" -e "pulsemixer" ;;
	3) setVolume set-mute @DEFAULT_AUDIO_SINK@ toggle ;;
	4) setVolume set-volume @DEFAULT_AUDIO_SINK@ 5%+ ;;
	5) setVolume set-volume @DEFAULT_AUDIO_SINK@ 5%- ;;
esac

vol="$(wpctl get-volume @DEFAULT_AUDIO_SINK@)"
[ "$vol" != "${vol%\[MUTED\]}" ] && echo   && exit
vol="${vol#Volume: }"

printf "󰕾 %.0f%%" "${vol/./}"
