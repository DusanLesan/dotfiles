#!/bin/sh

prompt() {
	if [ -z $DISPLAY ]; then
		fzf --bind=ctrl-space:print-query --prompt "$1" < /dev/stdin
	else
		dmenu -i -p "$1" < /dev/stdin
	fi
}

notify() {
	if [ -z $DISPLAY ]; then
		printf "%s: %s\n" "$1" "$2"
	else
		notify-send "$1" "$2"
	fi
}

getpass() {
	if [ -z $DISPLAY ]; then
		read -s -p "$1"
		echo $REPLY
	else
		dmenu -nb "#A54242" -P -p "$1" <&-
	fi
}

getfilename() {
	name="$1"
	dir="$2"
	if [ -e "$dir$name" ]; then
		name="${1%.*}"
		ext="${1#"$name"}"
		i="$(grep -o '[[:digit:]]*$' <<< "$name" )"
		[ -z $i ] && i=1 || name="${name%%$i*}"
		while [ -e "$dir$name$i$ext" ]; do
			((i++))
		done
		name="$name$i$ext"
	fi
	echo "$name"
}
